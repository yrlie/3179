<!DOCTYPE html>
<html>
<head>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
  
  <!-- CSS file -->
   <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">


</head>
<body>
  <div class="outer-wrap">
    <div class="page">

      <header class="top" role="banner">
        <h1 class="title">Drug Abuse in Malaysia (2016 - 2020)</h1>
        <p class="one-line">Tracking state, race, education, and drug type patterns.</p>
      </header>

      <!-- ROW 1: MAP -->
      <div class="row">
        <aside class="panel-left left-1" aria-label="map annotation">
          <h3 class="card-heading">üó∫Ô∏è Geographic focus</h3>
          <div class="caption">Where is prevalence highest?</div>
          <p class="desc"><span class="em">Terengganu</span> and northern states show highest rates per 100k.</p>
          <p class="desc"><strong>Why it matters:</strong> Targeted interventions here improve regional outcomes.</p>
          <div class="badge-box"><div class="badge">Choropleth</div><div class="badge">Per 100k</div><div class="badge">Graticule</div></div>
        </aside>

        <section class="panel-right" aria-label="choropleth map">
          <h3>Drug Addiction Rate by State (2020)</h3>
          <div id="choropleth_map" class="vis-container"></div>
        </section>
      </div>

      <!-- ROW 2: RACE -->
      <div class="row">
        <aside class="panel-left left-2">
          <h3 class="card-heading">üë• Demographics</h3>
          <div class="caption">Which race is most affected?</div>
          <p class="desc">The <span class="em">Malay</span> population consistently accounts for the largest share.</p>
          <div class="badge-box"><div class="badge">Stacked Area</div><div class="badge">2016 - 2020</div></div>
        </aside>

        <section class="panel-right">
          <h3>Number of Drug Cases by Race (2016 - 2020)</h3>
          <div id="stack_area_chart" class="vis-container"></div>
        </section>
      </div>

      <!-- ROW 3: EDUCATION -->
      <div class="row">
        <aside class="panel-left left-2">
          <h3 class="card-heading">üéì Education</h3>
          <div class="caption">Does schooling correlate?</div>
          <p class="desc"><span class="em">Secondary</span> or lower education groups form the largest share.</p>
          <div class="badge-box"><div class="badge">Lollipop</div><div class="badge">Policy insight</div></div>
        </aside>

        <section class="panel-right">
          <div class="slider-container">
            <label for="yearSlider" class="slider-label">
              Select Year: <span id="yearValue" class="slider-value">2020</span>
            </label>
            <input type="range" id="yearSlider" class="slider-input"
                  min="2016" max="2020" step="1" value="2020" />
          </div>
          <h3>Drug Abusers by Education Level (2016 - 2020)</h3>
          <div id="lollipop_chart" class="vis-container"></div>
        </section>
      </div>

      <!-- ROW 4: OCCUPATION -->
      <div class="row">
        <aside class="panel-left left-4">
          <h3 class="card-heading">üíº Occupation</h3>
          <div class="caption">Which job sectors are most vulnerable?</div>
          <p class="desc">Workers in <span class="em">casual</span> and <span class="em">general labour</span> roles report the highest number of drug abuse cases across all years.</p>
          <p class="desc"><strong>Why it matters:</strong> Targeted workplace prevention and support programs can reduce relapse risk.</p>
          <div class="badge-box">
            <div class="badge">Heatmap</div>
            <div class="badge">2016 - 2020</div>
            <div class="badge">Custom Color Scale</div>
          </div>
        </aside>

        <section class="panel-right">
          <h3>Drug Abuse Cases by Occupation (2016 - 2020)</h3>
          <div id="heatmap" class="vis-container"></div>
        </section>
      </div>


      <!-- ROW 5: DRUG TYPE -->
      <div class="row">
        <aside class="panel-left left-3">
          <h3 class="card-heading">üíä Drug type shift</h3>
          <div class="caption">Which drugs are rising?</div>
          <p class="desc"><span class="em">ATS</span> shows a marked increase versus Methamphetamine (Crystalline) and Methamphetamine (Tablet).</p>
          <div class="note-text">
            <strong>Note:</strong><br>
            - Opiates: Opium, Heroin, Morphine and Codeine
            - Methamphetamine (Crystalline): Syabu, Ice and Batu<br>
            - Methamphetamine (Tablet): Kuda, YABA, YAMA and Bomb Pills<br>
            - Cannabis: Cannabis, Hashish and Marijuana<br>
            - ATS: Ecstasy and Amphetamine<br>
            - Psychotropic pills: Benzodiazepine, Erimin 5, APO 5 and Dormicum<br>
            - Others: Kratom leaves, Cocaine, Ketamine, Depressants, Dissociative, Hallucinogen, Inhalants etc.<br>
          </div>
          <div class="badge-box"><div class="badge">Dumbbell</div><div class="badge">2016 - 2020</div></div>
          
        </aside>

        <section class="panel-right">
          <h3>Change in Abusers by Drug Type (<span style="color:blue;">2016</span> - <span style="color:green;">2020</span>)</h3>
          <div id="dumbell_chart" class="vis-container"></div>
        </section>
      </div>

      <!-- FOOTER -->
      <footer class="meta" role="contentinfo">
        <div class="meta-left">
          <div class="meta-item"><strong>Author:</strong> Liew Yun Ru<br>
            <strong>Date:</strong> 21/10/2025<br>
            <strong>Data Source:</strong><br>
            Topojson source: <a href="https://raw.githubusercontent.com/jnewbery/CartogramMalaysia/9ac25c828e0306dfa2c2869f98eb2b357da69764/public/data/malaysia-states.topojson" target="_blank" rel="noopener">Malaysia-states.topojson</a> <br>
            Population of State: <a href="https://www.citypopulation.de/en/malaysia/admin/" target="_blank" rel="noopener">citypopulation.de</a><br>
            Number of Drug Addicts by State: <a href="https://archive.data.gov.my/data/dataset/number-of-drug-addicts-by-state-malaysia" target="_blank" rel="noopener">Archive Data.gov.my</a><br>
            All other data: <a href="https://www.aadk.gov.my/wp-content/uploads/BMD_ENGLISH_final.pdf" target="_blank" rel="noopener">Information On Drugs 2020 (AADK)</a>
          </div>
        </div>
      </footer>

    </div>
  </div>


  <script type="text/javascript">

    var vg1 = "js/choropleth_map.vg.json";
    var vg2 = "js/stack_area_chart.vg.json";
    var vg3 = "js/lollipop_chart.vg.json";
    var vg4 = "js/dumbell_chart.vg.json";
    var vg5 = "js/heatmap.vg.json";

    vegaEmbed('#choropleth_map', vg1, 
      { "actions": false }
    ).then(function(result) {
    }).catch(console.error);

    vegaEmbed('#stack_area_chart', vg2,
      { "actions": false }
    ).then(function(result) {
    }).catch(console.error);

    vegaEmbed('#lollipop_chart', vg3,
      { "actions": false }
    ).then(function(result) {
    }).catch(console.error);

    vegaEmbed('#heatmap', vg5,
      { "actions": false }
    ).then(function(result) {
    }).catch(console.error);

    vegaEmbed('#dumbell_chart', vg4,
      { "actions": false }
    ).then(function(result) {
    }).catch(console.error);

    document.getElementById('yearSlider').addEventListener('input', function(evt) {
    document.getElementById('yearValue').textContent = evt.target.value;
    });

    document.getElementById('yearSlider1').addEventListener('input', function(evt) {
      document.getElementById('yearValue1').textContent = evt.target.value;
    });

  </script>

</body>
</html>
